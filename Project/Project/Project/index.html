<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Search diamonds by ID</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css" />
    <script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>


    <style>
        #proInfo img {
            max-height: 100px;
            max-width: 100px;
        }
    </style>
    <script type="text/javascript">
        function getAllStones(renderStones) {
            $.ajax({
                url: 'AjaxWebServiceGetDiamonds.asmx/getAllStones',
                type: 'POST',
                dataType: "json",
                contentType: 'application/json; charset = utf-8',
                success: function (results) {
                    alert('xx');
                    renderStones(results);
                },
                error: function (request, error) {
                    alert('Network error has occurred please try again!');
                }
            });
        }


        function renderStones(results) {
            //this is the callBackFunc 
            alert(results.d);
            dynamic_Stone = "";
            resutls = $.parseJSON(results.d);
            $.each(resutls, function (i, stone) {
                dynamic_Stone = "<li> <a href='#' stone name='" + stone.Name + "'>" + "<h3>" + stone.Weight + "</h3>" + "</li>";
                $("#StonesList").append(dynamic_Stone);
                $("#StonesList").listview('refresh');
            });
            $("#StonesList").listview('refresh');
        }


        $(document).ready(function () {
            $("#StonesList").empty();
            getAllStones(renderStones);
        });
        //"<li> <a href='#' id='" + stone.Name + "'>" + "<h3> weight=" + stone.Weight + "</h3>" + "</li>"
    </script>
</head>


<body>
    <div data-role="page" data-theme="a" data-content-theme="a" data-position="fixed" id="home">
        <!-- /header -->
        <div data-role="header" data-theme="b">
            <h1>
                Welcome
            </h1>
        </div>
        <!-- /content -->
        <div data-role="content">
            <ul data-role="listview" data-filter-reveal="false" data-filter="true" 
                style="display:block;  overflow-x: visible;" data-inset="true" id="StonesList" 
                data-divider-theme="e"></ul>
        </div>
        <!-- /footer -->
        <div data-role="footer" data-position="fixed">
            <sapn id="footimg">
                <img src="images/logo.png" alt="image" />
            </sapn>
        </div>
    </div>


    <div data-role="page" data-theme="a" data-position="fixed" id="productsPage">

        <!-- /header -->
        <div data-role="header" data-theme="b">
            <a href="#home" class="ui-shadow-icon ui-btn ui-shadow ui-corner-all ui-btn-b ui-icon-back ui-btn-icon-left" data-transition="slide" data-direction="reverse">Back</a>
            <h1> Products List </h1>
        </div>

        <!-- /content -->
        <div data-role="content">
            <ul data-role="listview" data-filter="true" data-inset="true" id="ProductList"></ul>
        </div>

        <!-- /footer -->
        <div data-role="footer" data-position="fixed">
            <sapn id="footimg">
                <img src="images/logo.png" alt="image" />
            </sapn>
        </div>
    </div>


    <div data-role="page" id="productInfoPage">

        <!-- /header -->
        <div data-role="header" data-theme="b">
            <a data-rel="back" data-icon="back" class="ui-btn ui-shadow ui-corner-all ui-icon-back ui-btn-icon-notext"></a>
            <h1> Product View </h1>
        </div>

        <!-- /content -->
        <div data-role="content">
            <ul data-role="listview" data-inset="true" id="fullProductList"></ul>
            <div data-role="collapsibleset" data-theme="a" data-content-theme="a" id="collapse">
            </div>
        </div>

        <!-- /footer -->
        <div data-role="footer" data-position="fixed">
            <sapn id="footimg">
                <img src="images/logo.png" alt="image" />
            </sapn>
        </div>
    </div>
</body>
</html>